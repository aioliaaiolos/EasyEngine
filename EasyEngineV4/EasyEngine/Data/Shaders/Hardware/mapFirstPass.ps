uniform sampler2D baseMap;
varying vec2 Texcoord;

uniform int nMaterialCount;
uniform int TextureCount;
uniform sampler2D baseMapArray[16];

varying float fPSMatID;

void main()
{
	if ( nMaterialCount == 1 )
	{
		gl_FragData[0] = texture2D( baseMap, Texcoord );
	}
	else
	{
		vec4 diffuseColor = vec4(0, 0, 0, 1);
		int nPSMatID = int(round(fPSMatID));
		if(nPSMatID < nMaterialCount) {
			if ( TextureCount != 0 )
				diffuseColor = texture2D( baseMapArray[nPSMatID], Texcoord );
		}
		gl_FragData[0] = diffuseColor;
	}
}
